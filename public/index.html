<!DOCTYPE html>
<html>
<head>
    <title>Wizard vs Dragon Konami</title>

    <!-- bobbieo.dev is latest working version, need to update -->

    <!-- google font -->
    <link href='https://fonts.googleapis.com/css?family=Monofett' rel='stylesheet' type='text/css'>

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    
    <!-- my css -->
    <link rel="stylesheet" href="/css/WizVsDragon.css">
</head>

<body>
    <div class="container">

        <div class="row">
            <div class="col-md-6">
                <h2 class="leftText fontPos">Enter the Konami Code to Start</h2>
            </div>

            <div class="col-md-6 rightDiv">
                <h2 class="rightText"></h2>
            </div>
        </div>

        <div class="row road">
            <div class="col-md-4">
                <div class="wizard"></div>
            </div>

            <div class="col-md-4">
                <div class="fire">
                    <img id="wizFire" src="/img/wizFire.png">
                    <img id="dragonFire" src="/img/dragonFire.png">
                </div>
            </div>

            <div class="col-md-4">
                <div class="dragon"></div>
            </div>
        </div>

    </div>

    <!-- audio file courtesty of Brandino480 via soundbible.com -->
    <audio preload="auto" id="metroid">
        <source src="/sound/Metroid_Door.mp3" type="audio/mpeg">
    </audio>

    <script src="/js/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script>
    (function(){ 
        "use strict";
            
        var userInput = [];

        // to play success sound
        function playSound() {
            $("#metroid")[0].play();
        }

        var index = 0;

        $(document).keydown(function(event){

            // var to store Konami code
            var codeArray = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65, 13];

            // for Konami entry fail notice
            if (codeArray[index] == event.keyCode) {
                index++;
            } else {
                $(".leftText").text("Nope! Try again.");
                index = 0;
            }

            // to change intro screen to game screen upon successful entry
            if (index == codeArray.length) {
                index = 0;
                playSound();
                $("body").css("background", "url(/img/fantasyForest.png) no-repeat center fixed").css("background-size", "cover");
                $(".leftText").text("Use a-d to move").css("font-size", "2.5em");
                $(".rightText").text("Use spacebar to shoot").css(
                    {
                        "font-size": "2.5em",
                        "font-family": "Monofett",
                        "display": "inline-block"
                    });
                $(".dragon").html("<img src='/img/purpleDragon.png'>");
                $(".wizard").html("<img src='/img/wizard-icon.png'>");
                $(document).off("keydown");
                $(document).keydown(movements);
            }; 
         });

        function movements(event) { 
            // var to store user input, 'concatenated' 
            userInput.push(event.keyCode);
   
            //var for randomizer
            var randomNum = Math.floor((Math.random() * 100) + 1);
            //var target wizFire
            var fireballMove = document.getElementById("wizFire");

            if (event.keyCode=='65') {
                $(".wizard img").animate({"margin-left": "-=90px"});
            };
            if (event.keyCode=='68') {
                $(".wizard img").animate({"margin-left": "+=90px"});
            };

            //for "fighting" (only wizard fire now)
            if (event.keyCode=='32') {
                if(randomNum % 2 == 0) {
                    $("#wizFire").css("opacity", "1").animate({"margin-left":"+=300px"}, function() {
                        $(".dragon").html("<img src='/img/explode.png'>"); 
                        $("#wizFire").css("opacity", "0"); 
                    });
                } else {
                    $("#dragonFire").css("opacity", "1").animate({"margin-right":"+=300px"}, function() {
                        $(".wizard").html("<img src='/img/explode.png'>");
                        $("#dragonFire").css("opacity", "0");
                    });
                };
            };
        };


        //NOTES TO DO:

        //try to limit wizard movement
        //disable movement after fireball fires
        //disable multiple fireballs possibility
        


    })();
    </script>
</body>
</html>





<!-- 
up arrow: 38;
down arrow: 40;
left arrow: 37;
right arrow: 39;
b: 66;
a: 65;
enter: 13;

Konami Code: 38 38 40 40 37 39 37 39 66 65 13

 -->